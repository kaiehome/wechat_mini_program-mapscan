<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>打卡点二维码（6个）</title>
  <style>
    body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background: #f7f7f7; }
    .page { max-width: 980px; margin: 0 auto; padding: 24px; }
    h1 { font-size: 20px; margin: 0 0 12px; }
    .desc { color: #666; margin-bottom: 16px; }
    .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
    .card { background: #fff; border-radius: 12px; padding: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
    .name { font-weight: 600; margin-bottom: 8px; }
    .code { width: 220px; height: 220px; margin: 0 auto; }
    .footer { margin-top: 20px; color: #888; font-size: 12px; }
    .row-title { grid-column: 1 / -1; font-size: 14px; color: #4CAF50; margin: 8px 0; }
    .actions { text-align: center; margin-top: 8px; }
    .btn { display: inline-block; background: #4CAF50; color: #fff; padding: 6px 12px; border-radius: 6px; text-decoration: none; margin: 0 6px; }
  </style>
  <!-- 使用 qrcodejs CDN 生成二维码 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
  <div class="page">
    <h1>打卡点二维码（共6个）</h1>
    <div class="desc">每个二维码内容为 <code>checkpoint:&lt;id&gt;</code>，与小程序扫码解析逻辑一致。可右键保存图片或点击下载。</div>
    <div class="grid">
      <div class="card"><div class="name">寻根·霜降廉养（签到）</div><div id="qr-signin" class="code"></div><div class="actions"><a id="dl-signin" class="btn" href="#">下载PNG</a></div></div>
      <div class="card"><div class="name">笃行·电竞廉规</div><div id="qr-esports" class="code"></div><div class="actions"><a id="dl-esports" class="btn" href="#">下载PNG</a></div></div>
      <div class="card"><div class="name">省身·啡香廉思</div><div id="qr-coffee" class="code"></div><div class="actions"><a id="dl-coffee" class="btn" href="#">下载PNG</a></div></div>
      <div class="card"><div class="name">正容·美妆廉仪</div><div id="qr-makeup" class="code"></div><div class="actions"><a id="dl-makeup" class="btn" href="#">下载PNG</a></div></div>
      <div class="card"><div class="name">静悟·清风入梦</div><div id="qr-sleep" class="code"></div><div class="actions"><a id="dl-sleep" class="btn" href="#">下载PNG</a></div></div>
      <div class="card"><div class="name">沁心·清风廉饮</div><div id="qr-breeze" class="code"></div><div class="actions"><a id="dl-breeze" class="btn" href="#">下载PNG</a></div></div>
    </div>
    <div class="footer">提示：建议优先扫描签到码（signin），随后可按任意顺序扫描其他5个点位。</div>
  </div>
  <script>
    const codes = {
      signin: 'checkpoint:signin',
      esports: 'checkpoint:esports',
      coffee: 'checkpoint:coffee',
      makeup: 'checkpoint:makeup',
      sleep: 'checkpoint:sleep',
      breeze: 'checkpoint:breeze'
    };

    function build(id, text) {
      const el = document.getElementById('qr-' + id);
      const qr = new QRCode(el, {
        text,
        width: 220,
        height: 220,
        correctLevel: QRCode.CorrectLevel.H
      });
      // 下载链接
      const dl = document.getElementById('dl-' + id);
      dl.addEventListener('click', function(e) {
        e.preventDefault();
        const canvas = el.querySelector('canvas');
        if (!canvas) return;
        const url = canvas.toDataURL('image/png');
        const a = document.createElement('a');
        a.href = url;
        a.download = id + '.png';
        a.click();
      });
    }

    Object.keys(codes).forEach(k => build(k, codes[k]));
  </script>
</body>
</html>