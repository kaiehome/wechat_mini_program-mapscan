# 廉洁探索之旅 - 微信小程序

一款基于微信小程序的扫码打卡集赞应用，用户可以通过扫描二维码在指定区域地图上打卡，收集电子印章，完成廉洁探索之旅。

## 功能特色

### 🎯 核心功能
- **扫码打卡**: 使用微信小程序相机API扫描二维码进行打卡
- **地图展示**: 集成地图组件，实时显示打卡点位和进度
- **电子印章**: 精美的电子印章收集系统，每个点位都有独特的印章设计
- **进度跟踪**: 实时跟踪用户打卡进度，支持本地数据存储
- **签到验证**: 必须先完成签到才能进行其他点位打卡

### 📍 打卡点位
1. **寻根·霜降廉养** - 签到点（必须第一个扫描）
2. **笃行·电竞廉规** - 电竞区打卡点
3. **省身·啡香廉思** - 咖啡区打卡点
4. **正容·美妆廉仪** - 美妆区打卡点
5. **静悟·清风入梦** - 睡眠区打卡点
6. **沁心·清风廉饮** - 清风区打卡点

### 🎨 用户体验
- **精美界面**: 现代化的UI设计，符合廉洁文化主题
- **动画效果**: 丰富的动画效果，提升用户体验
- **响应式设计**: 适配不同尺寸的手机屏幕
- **本地存储**: 数据持久化，支持离线使用

## 技术架构

### 🏗️ 项目结构
```
wechat_mini_program-mapscan/
├── app.js                    # 小程序入口文件
├── app.json                  # 全局配置文件
├── app.wxss                  # 全局样式文件
├── pages/                    # 页面目录
│   ├── index/               # 主页面（地图展示）
│   ├── scan/                # 扫码页面
│   └── stamps/              # 印章展示页面
├── components/              # 自定义组件
│   ├── map/                # 地图组件
│   ├── stamp/              # 印章组件
│   └── progress/           # 进度条组件
├── utils/                   # 工具函数
│   ├── storage.js          # 数据存储工具
│   ├── qrcode.js           # 二维码处理
│   ├── validation.js       # 验证逻辑
│   └── common.js           # 公共工具函数
├── data/                    # 数据文件
│   └── checkpoints.js      # 打卡点配置数据
├── images/                  # 图片资源
│   ├── stamps/             # 印章图片
│   ├── icons/              # 图标资源
│   └── backgrounds/        # 背景图片
└── styles/                  # 样式文件
    ├── common.wxss         # 公共样式
    └── variables.wxss      # 样式变量
```

### 🛠️ 技术栈
- **前端框架**: 微信小程序原生框架
- **地图组件**: 微信小程序地图组件 + 腾讯地图API
- **扫码功能**: wx.scanCode API
- **数据存储**: wx.setStorageSync 本地存储
- **状态管理**: 页面data + 全局状态管理
- **样式系统**: WXSS + CSS变量 + 响应式设计

### 📱 核心API使用
- `wx.scanCode()` - 二维码扫描
- `wx.createMapContext()` - 地图操作
- `wx.setStorageSync()` - 本地数据存储
- `wx.showModal()` - 弹窗提示
- `wx.vibrateShort()` - 震动反馈

## 安装使用

### 📋 环境要求
- 微信开发者工具
- 微信小程序开发账号
- 支持微信小程序的设备

### 🚀 快速开始

1. **克隆项目**
   ```bash
   git clone https://github.com/your-username/wechat_mini_program-mapscan.git
   cd wechat_mini_program-mapscan
   ```

2. **导入项目**
   - 打开微信开发者工具
   - 选择"导入项目"
   - 选择项目目录
   - 填写AppID（测试可使用测试号）

3. **配置项目**
   - 在 `project.config.json` 中配置正确的AppID
   - 根据需要修改 `data/checkpoints.js` 中的打卡点配置
   - 添加相应的图片资源到 `images/` 目录

4. **预览测试**
   - 点击"预览"按钮生成二维码
   - 使用微信扫描二维码在真机上测试

### 🔧 自定义配置

#### 修改打卡点配置
编辑 `data/checkpoints.js` 文件：
```javascript
export const checkpoints = [
  {
    id: 'your_checkpoint_id',
    name: '您的打卡点名称',
    position: {
      lat: 39.908823,  // 纬度
      lng: 116.397470  // 经度
    },
    // ... 其他配置
  }
]
```

#### 修改样式主题
编辑 `styles/variables.wxss` 文件：
```css
page {
  --primary-color: #4CAF50;  /* 主色调 */
  --secondary-color: #FF9800; /* 辅助色 */
  /* ... 其他颜色变量 */
}
```

## 功能说明

### 🔍 扫码功能
- 支持多种二维码格式（JSON、简单ID、URL参数）
- 自动验证二维码有效性
- 扫码失败时提供友好的错误提示

### 🗺️ 地图功能
- 实时显示打卡点位
- 根据完成状态显示不同颜色的标记
- 支持点击标记查看详情
- 自动居中显示所有打卡点

### 🏆 印章系统
- 每个打卡点都有独特的电子印章设计
- 支持印章动画效果
- 完成状态实时更新
- 印章详情弹窗展示

### 💾 数据存储
- 本地存储用户打卡进度
- 支持数据导出和导入
- 自动备份重要数据
- 异常情况下的数据恢复

## 开发指南

### 📝 添加新功能
1. 在相应的页面或组件中添加功能代码
2. 更新样式文件
3. 添加必要的工具函数
4. 更新文档说明

### 🐛 调试技巧
- 使用微信开发者工具的调试功能
- 查看控制台日志输出
- 使用真机调试功能
- 检查网络请求和存储数据

### 📦 打包发布
1. 在微信开发者工具中点击"上传"
2. 填写版本号和项目备注
3. 在微信公众平台提交审核
4. 审核通过后发布上线

## 常见问题

### ❓ FAQ

**Q: 扫码没有反应怎么办？**
A: 检查相机权限是否已授权，确保二维码内容格式正确。

**Q: 地图显示异常怎么办？**
A: 检查网络连接，确认地图API配置正确。

**Q: 数据丢失怎么办？**
A: 应用会自动备份数据，重新启动应用即可恢复。

**Q: 如何修改打卡点位置？**
A: 编辑 `data/checkpoints.js` 文件中的坐标信息。

### 🔧 故障排除
- 清除小程序缓存
- 重新授权相关权限
- 检查网络连接状态
- 重启微信小程序

## 更新日志

### v1.0.0 (2024-01-01)
- 🎉 初始版本发布
- ✨ 实现基础扫码打卡功能
- ✨ 集成地图组件和印章系统
- ✨ 完成用户界面设计
- ✨ 实现数据存储和状态管理

## 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 贡献

欢迎提交 Issue 和 Pull Request 来改进这个项目！

## 联系方式

如有问题或建议，请通过以下方式联系：
- 邮箱: your-email@example.com
- 微信: your-wechat-id

---

**廉洁探索之旅** - 让廉洁文化传播更加生动有趣！